(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60a1e814"],{"74e1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.newTaskFlow}},[e._v("创建")])],1),a("el-col",{attrs:{span:2,offset:10}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(" 高级搜索 ")])],1),a("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:e.searchTaskFlowVal,callback:function(t){e.searchTaskFlowVal=t},expression:"searchTaskFlowVal"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"搜索选项"},slot:"prepend",model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[a("el-option",{attrs:{label:"机房",value:"engine_room"}}),a("el-option",{attrs:{label:"SN号",value:"serial_number"}}),a("el-option",{attrs:{label:"客户组名",value:"custgroup_name"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fetchData},slot:"append"},[e._v(" 搜索 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"任务类型",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.taskTypeValue(t.row.task_type))+" ")])]}}])}),a("el-table-column",{attrs:{label:"客户组",align:"center",prop:"custgroup_name"}}),a("el-table-column",{attrs:{label:"机房",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(e.engineRoomValue(t.row.engine_room))+" ")])]}}])}),a("el-table-column",{attrs:{label:"任务状态",align:"center",prop:"task_status"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.task_status?a("span",[a("el-tag",{attrs:{type:"danger",effect:"dark"}},[e._v(" 待处理 ")])],1):e._e(),"1"===t.row.task_status?a("span",[a("el-tag",{attrs:{type:"success",effect:"dark"}},[e._v(" 完成 ")])],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"update_time",formatter:e.dateFormat}}),a("el-table-column",{attrs:{label:"评论",align:"center",prop:"comment"}}),a("el-table-column",{attrs:{align:"center",label:"操作",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.detail(t.row.id)}}},[e._v(" 详情 ")])]}}])})],1),a("el-pagination",{attrs:{background:"",align:"center","current-page":e.currentPage,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"高级搜索",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.searchForm}},[a("el-form-item",{attrs:{label:"任务状态","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.task_status,callback:function(t){e.$set(e.searchForm,"task_status",t)},expression:"searchForm.task_status"}})],1),a("el-form-item",{attrs:{label:"机房","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.engine_room,callback:function(t){e.$set(e.searchForm,"engine_room",t)},expression:"searchForm.engine_room"}})],1),a("el-form-item",{attrs:{label:"服务器序列号","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.IT_checked_number,callback:function(t){e.$set(e.searchForm,"IT_checked_number",t)},expression:"searchForm.IT_checked_number"}})],1),a("el-form-item",{attrs:{label:"IT验收编码","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-form-item",{attrs:{label:"节点编号","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.node_id,callback:function(t){e.$set(e.searchForm,"node_id",t)},expression:"searchForm.node_id"}})],1),a("el-form-item",{attrs:{label:"内网IP","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.inner_ip,callback:function(t){e.$set(e.searchForm,"inner_ip",t)},expression:"searchForm.inner_ip"}})],1),a("el-form-item",{attrs:{label:"客户组名","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.custgroup_name,callback:function(t){e.$set(e.searchForm,"custgroup_name",t)},expression:"searchForm.custgroup_name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.searchAdvanced}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a("4160"),a("159b"),a("5530")),n=a("a201"),l=a("2f62"),i=a("5c96"),c={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{next:"",previous:"",searchTaskFlowVal:"",searchKey:"",currentPage:1,pageSize:10,total:0,list:[],listLoading:!0,dialogFormVisible:!1,form:{id:""},searchForm:{task_status:"",engine_room:"",serial_number:"",IT_checked_number:"",node_id:"",inner_ip:"",custgroup_name:"",created_start_time:""},formLabelWidth:"200px"}},computed:Object(o["a"])({},Object(l["b"])(["toraapp"])),watch:{searchTaskFlowVal:function(){}},created:function(){this.fetchData(this.currentPage)},mounted:function(){},methods:{searchAdvanced:function(){var e=this;this.dialogFormVisible=!1,this.listLoading=!0,Object(n["b"])(this.currentPage,this.searchForm.task_status,this.searchForm.engine_room,this.searchForm.serial_number,this.searchForm.IT_checked_number,this.searchForm.node_id,this.searchForm.inner_ip,this.searchForm.custgroup_name).then((function(t){e.list=t.results,e.total=t.count,e.list.forEach((function(t){t=e.taskTypeValue(t.task_type)})),e.listLoading=!1})).catch((function(e){console.log(e),Object(i["Message"])({message:"搜索失败",type:"error",duration:3e3})}))},engineRoomValue:function(e){for(var t in this.toraapp.ROOM_CHOICES)if(e===t)return this.toraapp.ROOM_CHOICES[t];return"error"},taskTypeValue:function(e){for(var t in this.toraapp.TASK_CHOICES)if(e===t)return this.toraapp.TASK_CHOICES[t];return"error"},getUserInfo:function(){},newTaskFlow:function(){this.$router.push("/TaskFlowForm/TaskFlowCreate")},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.fetchData(e,this.searchTaskFlowVal)},fetchData:function(e){var t=this;this.listLoading=!0,null!==this.searchKey&&""!==this.searchKey||Object(n["a"])(e,this.searchTaskFlowVal).then((function(e){t.list=e.results,t.total=e.count,t.next=e.next,t.previous=e.previous,t.list.forEach((function(e){e=t.taskTypeValue(e.task_type)})),t.listLoading=!1})),"engine_room"===this.searchKey&&Object(n["d"])(this.currentPage,this.searchTaskFlowVal).then((function(e){t.list=e.results,t.total=e.count,t.next=e.next,t.previous=e.previous,t.list.forEach((function(e){e=t.taskTypeValue(e.task_type)})),t.listLoading=!1})).catch(this.listLoading=!1),"custgroup_name"===this.searchKey&&Object(n["c"])(this.currentPage,this.searchTaskFlowVal).then((function(e){t.list=e.results,t.total=e.count,t.next=e.next,t.previous=e.previous,t.list.forEach((function(e){e=t.taskTypeValue(e.task_type)})),t.listLoading=!1})),"serial_number"===this.searchKey&&(console.log("This.searchKey",this.searchKey),Object(n["e"])(this.currentPage,this.searchTaskFlowVal).then((function(e){t.list=e.results,t.total=e.count,t.next=e.next,t.previous=e.previous,t.list.forEach((function(e){e=t.taskTypeValue(e.task_type)})),t.listLoading=!1})).catch(this.listLoading=!1))},searchTaskFlow:function(){var e=this;this.listLoading=!0,console.log("In the searchTaskFlow",this.searchVal),"engine_room"===this.searchKey&&Object(n["d"])(this.currentPage,this.searchTaskFlowVal).then((function(t){e.list=t.results,e.total=t.count,e.list.forEach((function(t){t=e.taskTypeValue(t.task_type)})),e.listLoading=!1}))},detail:function(e){this.form.id=e,this.$router.push({path:"/TaskFlowForm/TaskFlowCreate",query:{taskflowid:e}})},dateFormat:function(e,t){var a=new Date(e.update_time);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}}},u=c,h=(a("99a7"),a("2877")),p=Object(h["a"])(u,r,s,!1,null,"5d471744",null);t["default"]=p.exports},"99a7":function(e,t,a){"use strict";a("9bd8")},"9bd8":function(e,t,a){},a201:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return i}));var r=a("b775");function s(e){return Object(r["a"])({url:"/task-flows/",method:"get",params:{page:e}})}function o(e,t){return Object(r["a"])({url:"/task-flows/",method:"get",params:{page:e,engine_room:t}})}function n(e,t){return Object(r["a"])({url:"/task-flows/",method:"get",params:{page:e,customer:t}})}function l(e,t){return Object(r["a"])({url:"/task-flows/",method:"get",params:{page:e,serial_number:t}})}function i(e,t,a,s,o,n,l,i){return Object(r["a"])({url:"/task-flows/",method:"get",params:{page:e,task_status:t,engine_room:a,serial_number:s,IT_checked_number:o,node_id:n,inner_ip:l,custgroup_name:i}})}}}]);